import{_ as a,c as e,al as n,o as s}from"./chunks/framework.NFAqBSgQ.js";const u=JSON.parse('{"title":"Network support with VPNKit","description":"","frontmatter":{},"headers":[],"relativePath":"en/platforms/sim/network_vpnkit.md","filePath":"en/platforms/sim/network_vpnkit.md"}'),i={name:"en/platforms/sim/network_vpnkit.md"};function o(p,t,r,l,c,h){return s(),e("div",null,t[0]||(t[0]=[n(`<h1 id="network-support-with-vpnkit" tabindex="-1">Network support with VPNKit <a class="header-anchor" href="#network-support-with-vpnkit" aria-label="Permalink to &quot;Network support with VPNKit&quot;">​</a></h1><p>The simulation can be configured to use VPNKit to provide network support. While this was developed for macOS, it should work on other platforms as well.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CONFIG_SIM_NETDEV=y</span></span>
<span class="line"><span>CONFIG_SIM_NETDEV_TAP is not set</span></span>
<span class="line"><span>CONFIG_SIM_NETDEV_VPNKIT=y</span></span>
<span class="line"><span>CONFIG_SIM_NETDEV_VPNKIT_PATH=&quot;/tmp/vpnkit-nuttx&quot;</span></span></code></pre></div><p>You can use the <code>sim:vpnkit</code> configuration, which includes the above settings.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./tools/configure.sh sim:vpnkit</span></span></code></pre></div><h2 id="vpnkit-setup" tabindex="-1">VPNKit setup <a class="header-anchor" href="#vpnkit-setup" aria-label="Permalink to &quot;VPNKit setup&quot;">​</a></h2><p>See [<a href="https://github.com/moby/vpnkit" target="_blank" rel="noreferrer">https://github.com/moby/vpnkit</a>]{.title-ref} for build instructions.</p><p>If you have Docker Desktop for Mac installed on your machine, you can find a vpnkit binary at:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/Applications/Docker.app/Contents/Resources/bin/com.docker.vpnkit</span></span></code></pre></div><p>A docker image containing a static Linux binary is also available:</p><p class="title-ref">[<a href="https://hub.docker.com/r/djs55/vpnkit" target="_blank" rel="noreferrer">https://hub.docker.com/r/djs55/vpnkit</a>]</p><h2 id="how-to-run" tabindex="-1">How to run <a class="header-anchor" href="#how-to-run" aria-label="Permalink to &quot;How to run&quot;">​</a></h2><p>You can use it as the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>% vpnkit --ethernet /tmp/vpnkit-nuttx &amp;</span></span>
<span class="line"><span>% ./nuttx</span></span></code></pre></div><p>NuttX&#39;s <code>CONFIG_SIM_NETDEV_VPNKIT_PATH</code> should match vpnkit&#39;s <code>--ethernet</code> option.</p>`,16)]))}const k=a(i,[["render",o]]);export{u as __pageData,k as default};
