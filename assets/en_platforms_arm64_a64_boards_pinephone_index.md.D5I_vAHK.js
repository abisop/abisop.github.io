import{_ as a,c as n,al as o,o as t}from"./chunks/framework.NFAqBSgQ.js";const u=JSON.parse('{"title":"PINE64 PinePhone","description":"","frontmatter":{},"headers":[],"relativePath":"en/platforms/arm64/a64/boards/pinephone/index.md","filePath":"en/platforms/arm64/a64/boards/pinephone/index.md"}'),i={name:"en/platforms/arm64/a64/boards/pinephone/index.md"};function r(l,e,s,p,h,c){return t(),n("div",null,e[0]||(e[0]=[o(`<h1 id="pine64-pinephone" tabindex="-1">PINE64 PinePhone <a class="header-anchor" href="#pine64-pinephone" aria-label="Permalink to &quot;PINE64 PinePhone&quot;">​</a></h1><p>chip:a64</p><p><a href="https://wiki.pine64.org/index.php/PinePhone" target="_blank" rel="noreferrer">PinePhone</a> is an ARM64 smartphone created by PINE64.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><ul><li></li></ul><pre><code>**System on Chip:** Allwinner A64

:   -   **CPU:** Quad-Core ARM Cortex-A53
    -   **GPU:** ARM Mali400 MP2
    -   **Interrupt Controller:** ARM GIC PL400 (Generic Interrupt
        Controller v2)
    -   **Display Engine:** Allwinner Display Engine 2.0 (MIPI DSI
        with DMA)
</code></pre><ul><li><p><strong>Display:</strong> Xingbangda XBD599 HD IPS Display (5.95 inches, 1440x720 resolution, 16M colors, PWM Backlight)</p></li><li><p><strong>Touch Panel:</strong> Goodix GT917S Capacitive Touch Panel (I2C)</p></li><li><p><strong>LCD Controller:</strong> Sitronix ST7703 (MIPI DSI)</p></li><li><p><strong>RAM:</strong> 2GB or 3GB LPDDR3 SDRAM</p></li><li><p><strong>Internal Storage:</strong> 16GB or 32GB eMMC, extendable up to 2TB via microSD</p></li><li><p><strong>Back Camera:</strong> Single 5MP, 1/4&quot;, LED Flash</p></li><li><p><strong>Front Camera:</strong> Single 2MP, f/2.8, 1/5&quot;</p></li><li><p><strong>Sound:</strong> Loudspeaker, 3.5mm jack &amp; mic (jack doubles as Hardware UART if Privacy Switch 6 is Off)</p></li><li></li></ul><pre><code>Modem: Quectel EG25-G

:   -   **LTE-FDD, LTE-TDD, WCDMA, GSM**
    -   **GNSS:** GPS / GLONASS / BeiDou / Galileo / QZSS, with
        A-GPS
</code></pre><ul><li></li></ul><pre><code>2.4 GHz Wireless: Realtek RTL8723CS

:   -   **WLAN:** WiFi 802.11 b/g/n, single-band, hotspot
    -   **Bluetooth:** 4.0, A2DP
</code></pre><ul><li><p><strong>Magnetometer:</strong> STMicroelectronics LIS3MDL</p></li><li><p><strong>Ambient Light / Proximity:</strong> SensorTek STK3335</p></li><li><p><strong>Accelerometer / Gyroscope:</strong> InvenSense MPU-6050 (I2C)</p></li><li><p><strong>Privacy Switches:</strong> Modem, WiFi &amp; Bluetooth, Microphone, Cameras, Headphone</p></li><li><p><strong>Battery:</strong> Lithium-ion, rated capacity 2800mAh (10.64Wh), typical capacity 3000mAh (11.40Wh)</p></li><li><p><strong>I/O:</strong> USB Type-C, USB Host, DisplayPort Alternate Mode output, 15W 5V 3A Quick Charge, follows USB PD specification</p></li><li><p><strong>Power Management Integrated Circuit:</strong> X-Powers AXP803 (Reduced Serial Bus)</p></li></ul><h2 id="serial-console" tabindex="-1">Serial Console <a class="header-anchor" href="#serial-console" aria-label="Permalink to &quot;Serial Console&quot;">​</a></h2><p>A <a href="https://wiki.pine64.org/index.php/PinePhone#Serial_console" target="_blank" rel="noreferrer">PinePhone Serial Debug Cable</a> is required to run NuttX on PinePhone.</p><p>On PinePhone, set the <a href="https://wiki.pine64.org/index.php/PinePhone#Privacy_switch_configuration" target="_blank" rel="noreferrer">Privacy Switch 6 (Headphone)</a> to <strong>Off</strong>.</p><p>Connect PinePhone to our computer with the Serial Debug Cable. On our computer, start a Serial Terminal and connect to the USB Serial Port at <strong>115.2 kbps</strong>.</p><p>NuttX will appear in the Serial Console when it boots on PinePhone.</p><h2 id="arm64-toolchain" tabindex="-1">ARM64 Toolchain <a class="header-anchor" href="#arm64-toolchain" aria-label="Permalink to &quot;ARM64 Toolchain&quot;">​</a></h2><p>Before building NuttX for PinePhone, download the ARM64 Toolchain for <strong>AArch64 Bare-Metal Target</strong> <code>aarch64-none-elf</code> from <a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads" target="_blank" rel="noreferrer">Arm GNU Toolchain Downloads</a>. (Skip the section for Beta Releases)</p><p>Add the downloaded toolchain <code>gcc-arm-...-aarch64-none-elf/bin</code> to the <code>PATH</code> Environment Variable.</p><p>Check the ARM64 Toolchain:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> aarch64-none-elf-gcc -v</span></span></code></pre></div><h2 id="building" tabindex="-1">Building <a class="header-anchor" href="#building" aria-label="Permalink to &quot;Building&quot;">​</a></h2><p>To build NuttX for PinePhone, [[in](\`in.md)stall the prerequisites &lt;/quickstart/install&gt;]{.title-ref} and [[clone the git repo](\`clone the git repo.md)sitories &lt;/quickstart/install&gt;]{.title-ref} for <code>nuttx</code> and <code>apps</code>.</p><p>Configure the NuttX project and build the project:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> cd nuttx</span></span>
<span class="line"><span> tools/configure.sh pinephone:lvgl</span></span>
<span class="line"><span> make</span></span>
<span class="line"><span> cp nuttx.bin Image</span></span>
<span class="line"><span> rm -f Image.gz</span></span>
<span class="line"><span> gzip Image</span></span></code></pre></div><p>This produces the file <code>Image.gz</code>, which will be copied to PinePhone in the next step.</p><p>If the build fails with the error <code>token &quot;@&quot; is not valid in preprocessor</code>, <a href="https://github.com/apache/nuttx/pull/7284/commits/518b0eb31cb66f25b590ae9a79ab16c319b96b94#diff-12291efd8a0ded1bc38bad733d99e4840ae5112b465c04287f91ba5169612c73" target="_blank" rel="noreferrer">apply this patch</a> to <code>gcc-arm-none-eabi/arm-none-eabi/include/_newlib_version.h</code> in the ARM64 Toolchain.</p><h2 id="booting" tabindex="-1">Booting <a class="header-anchor" href="#booting" aria-label="Permalink to &quot;Booting&quot;">​</a></h2><p>NuttX boots on PinePhone via a microSD Card. To prepare the microSD Card, download the <strong>PinePhone Jumpdrive Image</strong><code>pine64-pinephone.img.xz</code> from <a href="https://github.com/dreemurrs-embedded/Jumpdrive/releases" target="_blank" rel="noreferrer">dreemurrs-embedded/Jumpdrive</a>.</p><p>Write the downloaded image to a microSD Card with <a href="https://www.balena.io/etcher/" target="_blank" rel="noreferrer">Balena Etcher</a>.</p><p>Copy the file <code>Image.gz</code> from the previous section and overwrite the file on the microSD Card.</p><p>Check that PinePhone is connected to our computer via a <a href="https://wiki.pine64.org/index.php/PinePhone#Serial_console" target="_blank" rel="noreferrer">Serial Debug Cable</a> at 115.2 kbps. <a href="https://wiki.pine64.org/index.php/PinePhone#Privacy_switch_configuration" target="_blank" rel="noreferrer">Privacy Switch 6 (Headphone)</a> should be set to <strong>Off</strong>.</p><p>Insert the microSD Card into PinePhone and power up PinePhone. NuttX boots on PinePhone and NuttShell (nsh) appears in the Serial Console.</p><p>To see the available commands in NuttShell:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> help</span></span></code></pre></div><p>To run the LVGL Touchscreen Demo:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> lvgldemo widgets</span></span></code></pre></div><h2 id="leds" tabindex="-1">LEDs <a class="header-anchor" href="#leds" aria-label="Permalink to &quot;LEDs&quot;">​</a></h2><p>The supported PinePhone LEDs are:</p><p>Index LED PIO</p><hr><p>LED1 Green LED PD18 LED2 Red LED PD19 LED3 Blue LED PD20</p><h2 id="configurations" tabindex="-1">Configurations <a class="header-anchor" href="#configurations" aria-label="Permalink to &quot;Configurations&quot;">​</a></h2><h3 id="lcd" tabindex="-1">lcd <a class="header-anchor" href="#lcd" aria-label="Permalink to &quot;lcd&quot;">​</a></h3><p>Supports LCD Display (XBD599) with LCD Controller (ST7703), Display Engine 2.0, MIPI Display Serial Interface (DSI), Power Management Integrated Circuit (AXP803) and Reduced Serial Bus (RSB). Serial Console is enabled on UART0 at 115.2 kbps.</p><h3 id="lvgl" tabindex="-1">lvgl <a class="header-anchor" href="#lvgl" aria-label="Permalink to &quot;lvgl&quot;">​</a></h3><p>Supports all the features in <code>lcd</code>, plus LVGL Graphics Library and Touch Panel (GT917S). Serial Console is enabled on UART0 at 115.2 kbps.</p><h4 id="nsh" tabindex="-1">nsh <a class="header-anchor" href="#nsh" aria-label="Permalink to &quot;nsh&quot;">​</a></h4><p>Basic configuration that runs NuttShell (nsh). This configuration is focused on low level, command-line driver testing. Built-in applications are supported, but none are enabled. Serial Console is enabled on UART0 at 115.2 kbps.</p><h4 id="sensor" tabindex="-1">sensor <a class="header-anchor" href="#sensor" aria-label="Permalink to &quot;sensor&quot;">​</a></h4><p>Supports Accelerometer / Gyroscope (MPU-6050), Power Management Integrated Circuit (AXP803) and Reduced Serial Bus (RSB). Serial Console is enabled on UART0 at 115.2 kbps.</p><h2 id="peripheral-support" tabindex="-1">Peripheral Support <a class="header-anchor" href="#peripheral-support" aria-label="Permalink to &quot;Peripheral Support&quot;">​</a></h2><p>NuttX for PinePhone supports these peripherals:</p><p>Peripheral Support NOTES</p><hr><p>Accelerometer (MPU-6050) Backlight Display Engine Frame Buffer LCD Controller (ST7703) LCD Panel (XBD599) MIPI D-PHY MIPI DSI PIO PMIC (AXP803) RSB TCON0 TWI / I2C Touch Panel (GT917S) UART Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes Yes</p>`,56)]))}const g=a(i,[["render",r]]);export{u as __pageData,g as default};
