import{_ as t,c as o,al as i,o as c}from"./chunks/framework.NFAqBSgQ.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"en/platforms/renesas/m16c/boards/skp16c26/README.md","filePath":"en/platforms/renesas/m16c/boards/skp16c26/README.md"}'),r={name:"en/platforms/renesas/m16c/boards/skp16c26/README.md"};function l(a,e,d,n,s,p){return c(),o("div",null,e[0]||(e[0]=[i(`<p>Documentation/platforms/renesas/m16c/boards/skp16c26/README.txt ^^^^^^^^^^^^^^^^^^^^^^^^^^^</p><ol><li><p>The buildroot package can be used to build an M16C toolchain. The toolchain buildroot can be downloaded from buildroot in the NuttX GIT. Insructions for building the toolchain are provided below.</p><p>However, the target cannot be built because the GNU m16c-nuttx-elf-ld link fails with the following message:</p><p>m32c-nuttx-elf-ld: BFD (GNU Binutils) 2.19 assertion fail /home/Owner/projects/nuttx/buildroot/toolchain_build_m32c/binutils-2.19/bfd/elf32-m32c.c:482</p><p>Where the reference line is:</p><p>/* If the symbol is out of range for a 16-bit address, we must have allocated a plt entry. */ BFD_ASSERT (*plt_offset != (bfd_vma) -1);</p><p>No workaround is known at this time. This is a show stopper for M16C.</p></li><li><p>A supported version of the M16C toolchain is available here:</p><p><a href="http://www.kpitgnutools.com/index.php" target="_blank" rel="noreferrer">http://www.kpitgnutools.com/index.php</a></p><p>This download is free but requires registration. Unfortunately, this v0901 of this toolchain shows the same behavior:</p><p>c:<code>\\Hew3</code><code>\\Tools</code><code>\\KPIT </code>Cummins<code>\\GNUM</code>16CM32C-ELF<code>\\v0901</code><code>\\m</code>32c-elf<code>\\bin</code><code>\\m</code>32c-elf-ld.exe: BFD (GNU Binutils) 2.19-GNUM16CM32C_v0901 assertion fail /home/kpit/fsfsrc/binutils-2.19/bfd/elf32-m32c.c:482</p></li></ol><p>It is possible that this error message may be telling me -- a very roundabout way -- that I have exceeded the FLASH region, but I think that unlikely (it is difficult to know if the link does not complete gracefully).</p><p>BUILDING THE R8C/M16C/M32C GNU TOOLCHAIN USING BUILDROOT ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p><p>NOTE: See the toolchain issues above -- you may not want to waste your time.</p><ol><li><p>CD to the correct directory.</p><p>Change to the directory just above the NuttX installation. If <code>&lt;nuttx-dir&gt;</code> is where NuttX is installed, then cd to <code>&lt;nuttx-dir&gt;</code>/..</p></li><li><p>Get and Install the buildroot Module</p><p>a. Using a release tarball:</p><p>cd <code>&lt;nuttx-dir&gt;</code>/.. Download the appropriate buildroot package. unpack the buildroot package rename the directory to buildroot</p><p>b. Using GIT</p><p>Check out the buildroot module. GIT checkout instructions:</p><pre><code> git clone https://patacongo@bitbucket.org/nuttx/buildroot.git buildroot
</code></pre><p>Make the archive directory:</p><pre><code>mkdir archive
</code></pre><p>The <code>&lt;nuttx-dir&gt;</code>/../buildroot is where the toolchain is built; The <code>&lt;nuttx-dir&gt;</code>/../archive directory is where toolchain sources will be downloaded.</p></li><li><p>Make sure that NuttX is configured</p><p>cd <code>&lt;nuttx-dir&gt;</code> tools/configure.sh <code>&lt;nuttx-configuration&gt;</code></p></li><li><p>Configure and Make the buildroot</p><p>cd <code>&lt;buildroot-dir&gt;</code> cp boards/m32c-defconfig-4.2.4 .config make oldconfig make</p><p>This will download the large source packages for the toolchain and build the toolchain. The resulting binaries will be under buildroot/build_m32c. There will also be a large build directory called toolchain_build_m32c; this directory can be removed once the build completes successfully.</p></li></ol><p>Cygwin GCC BUILD NOTES ^^^^^^^^^^^^^^^^^^^^^^ On Cygwin, the buildroot &#39;make&#39; command will fail with an error like:</p><p>&quot;... build/genchecksum cc1-dummy &gt; cc1-checksum.c opening cc1-dummy: No such file or directory ...&quot;</p><p>This is caused because on Cygwin, host executables will be generated with the extension .exe and, apparently, the make variable &quot;exeext&quot; is set incorrectly. A work around after the above occurs is:</p><pre><code>  cd toolchain_build_m32c/gcc-4.2.4-initial/gcc # Go to the directory where error occurred
  mv cc1-dummy.exe cc1-dummy            # Rename the executable without .exe
  rm cc1-checksum.c                 # Get rid of the bad generated file
</code></pre><p>Then resume the buildroot make:</p><pre><code>  cd -                      # Back to the buildroot make directory
  make                      # Restart the build
</code></pre><p>GCC is built twice. First a initial, &quot;bootstrap&quot; GCC is produced in toolchain_build_m32c/gcc-4.2.4-initial, then the final GCC is produced in toolchain_build_m32c/gcc-4.2.4-final. The above error will occur twice: Once for the initial GCC build (see above) and once for the final GCC build. For the final GCC build, the workaround is the same except that the directory will be toolchain_build_m32c/gcc-4.2.4-final/gcc.</p>`,13)]))}const b=t(r,[["render",l]]);export{h as __pageData,b as default};
